<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OnlyBot EXPUESTA</title>
<style>
body { font-family: sans-serif; background: #f9f9f9; margin:0; display:flex; flex-direction:column; align-items:center; height:100vh; }
#chat { width:90%; max-width:500px; height:70vh; background:white; border-radius:10px; overflow-y:auto; padding:10px; margin-top:10px; }
.message { margin:10px; padding:10px; border-radius:10px; }
.user { background:#dcf8c6; align-self:flex-end; }
.bot { background:#eee; align-self:flex-start; }
#input-area { display:flex; width:90%; max-width:500px; margin-top:10px; }
input { flex:1; padding:10px; border-radius:10px 0 0 10px; border:1px solid #ccc; outline:none; }
button { padding:10px 15px; border:none; background:#007bff; color:white; border-radius:0 10px 10px 0; cursor:pointer; }
</style>
</head>
<body>

<div id="chat"></div>
<div id="input-area">
  <input id="userInput" placeholder="Escribí tu mensaje..."/>
  <button id="sendBtn">Enviar</button>
</div>

<script>
const OPENAI_API_KEY = "sk-TU-API-KEY-AQUI"; // ⚠️ API key expuesta
const chat = document.getElementById("chat");
const input = document.getElementById("userInput");
const sendBtn = document.getElementById("sendBtn");

function addMessage(sender, text) {
  const m = document.createElement("div");
  m.className = `message ${sender}`;
  m.textContent = text;
  chat.appendChild(m);
  chat.scrollTop = chat.scrollHeight;
}

async function sendMessage() {
  const text = input.value.trim();
  if (!text) return;
  addMessage("user", text);
  input.value = "";
  addMessage("bot", "Escribiendo...");

  try {
    const res = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${OPENAI_API_KEY}`
      },
      body: JSON.stringify({
        model: "gpt-3.5-turbo",
        messages: [
          { role: "system", content: "Eres OnlyBot, un asistente experto en panadería y recetas. Podés responder cualquier tema con tono amigable y útil." },
          { role: "user", content: text }
        ]
      })
    });

    const data = await res.json();
    chat.lastChild.textContent = "Bot: " + (data.choices?.[0]?.message?.content || "No se obtuvo respuesta");

  } catch (err) {
    chat.lastChild.textContent = "Bot: ⚠️ Error de conexión";
    console.error(err);
  }
}

sendBtn.addEventListener("click", sendMessage);
input.addEventListener("keypress", e => { if (e.key === "Enter") sendMessage(); });
</script>

</body>
</html>


